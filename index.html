<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- leaflet js link  -->
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
	<!-- geojson vt  -->
	<script src="../libs/geojson-vt.js"></script>
	<script src="../src/leaflet-geojson-vt.js"></script>
	<!-- js data link  -->
	<script src="./parcelles.js"></script>
	<script src="./batiments.js"></script>
	<script src="./favorables.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
    <style>
      body {margin: 0; padding: 0;}
      #map {width: 100%; height: 100vh;}
    </style>
    <title>leaflet-geojson-vt demo</title>

  </head>
  <body>
    <div id="map"></div>
  </body>
</html>


<script>
  var map = L.map("map").setView([41.587523, 9.277182], 11);

  var osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 19,
    attribution:
      '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
  });

  osm.addTo(map);

  var geojsonStyleP = {
    fillColor:"#eb8334",
    color: "#000",
    weight: 2,
    opacity: 0.1,
    fillOpacity: 0.01,
  };
var geojsonStyleB = {
    fillColor:"#ffff00",
    color: "#ffff00",
    weight: 0.5,
    fillOpacity: 0.01,
  };
  
var geojsonStyleF = {
    fillColor:"#f54242",
    color: "#f54242",
    weight: 5,
    opacity: 1,
    fillOpacity: 1,
  };

var optionsP = {
    maxZoom: 20,
    tolerance: 3,
    debug: 0,
    style: geojsonStyleP
};

var optionsB = {
    maxZoom: 20,
    tolerance: 3,
    debug: 0,
    style: geojsonStyleB
};

var optionsF = {
    maxZoom: 20,
    tolerance: 3,
    debug: 0,
    style: geojsonStyleF
};
var parcelles = L.geoJson.vt(parcelles, optionsP).addTo(map);
var batiments = L.geoJson.vt(batiments, optionsB).addTo(map);
var favorables = L.geoJson.vt(favorables, optionsF).addTo(map);

const overlays = [
    {name: 'parcelles', layer: parcelles},
    {name: 'batiments', layer: batiments},
	{name: 'favorables', layer: favorables},
];

const legend = L.multiControl(overlays, {position:'topright', label: 'Calques'}).addTo(map);


</script>


<!-- function getColor(d) {
  return d > 0.73  ? '#800026' :
         d > 0.55  ? '#BD0026' :
         d > 0.5   ? '#E31A1C' :
         d > 0.3   ? '#FC4E2A' :
         d > 0.2   ? '#FD8D3C' :
         d > 0.08  ? '#FEB24C' :
         d > 0.01  ? '#FED976' :
                    '#FFEDA0';
}

function style(feature) {
  return {
  fillColor: getColor(feature.properties.Shape_Area),
  color: "#000",
  weight: 1,
  opacity: 1,
  fillOpacity: 0.5,
  }
} -->