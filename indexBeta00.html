<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Carte Satellite avec GeoJSON et Mapbox GL JS</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>

	
</head>
<body>
    <div id="layerList">
        <div class="save-load-buttons">
            <button onclick="saveLayers()">Save</button>
            <button onclick="loadLayers()">Load</button>
            <button onclick="resetLayers()">Reset</button>
        </div>
        <div class="add-layer" onclick="document.getElementById('fileInput').click();">+</div>
    </div>
    <input type="file" id="fileInput" accept=".geojson" style="display: none;" />
    <input type="file" id="geojsonFilesInput" accept=".geojson" multiple style="display: none;" />
    <div id="map"></div>

    <script>
        // Ajoutez votre clé d'API Mapbox ici
        mapboxgl.accessToken = 'pk.eyJ1IjoiYXp6b2NvcnAiLCJhIjoiY2x4MDVtdnowMGlncjJqcmFhbjhjaDhidiJ9.iNiKldcG83Nr02956JPbTA';

        // Initialisation de la carte
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/satellite-v9', // Style satellite
            center: [9.27970, 41.59099], // Coordonnées de Paris par défaut
            zoom: 12
        });

        // Ajout des contrôles de navigation
        map.addControl(new mapboxgl.NavigationControl());

        // Ajout des contrôles de géolocalisation
        map.addControl(new mapboxgl.GeolocateControl({
            positionOptions: {
                enableHighAccuracy: true
            },
            trackUserLocation: true
        }));

        // Load MapLibre style layers on page load
        map.on('load', function() {
            const mapLayers = getMapLayer();
            mapLayers.forEach(layer => {
                addLayerToList(layer.id, layer.id, null, '#FFFFFF', 1, layer.index, layer.type);
            });
        });
    </script>

    <script src="js/lm00.js"></script>
</body>
</html>
